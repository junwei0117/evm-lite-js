import { EVMLC } from 'evm-lite-core';
import { Transaction } from '../src';


const evmlc = new EVMLC('n0.monet.network', 8080, {
    from: '0xc7532cb0698d68df214f5b7425672b215fe60bb7'.toUpperCase(),
    gas: 10000000,
    gasPrice: 0
})

export const POA_BYTECODE =
	'608060405234801561001057600080fd5b50604051602080610a33833981016040818152' +
	'915182820183523380835260006020808501828152838352908290528582209451855460' +
	'0160a060020a031916600160a060020a0390911617855551600194850155928055925190' +
	'92839290917f1d48c1c80f973622ea182e7afdb4c88d758cb0ee74df1bf4dcba402816a6' +
	'24f09190a3604051339081907f1d59e2e6c4b37f9c668f9d870ba0a5a6a053cb1b6b83a7' +
	'cdf7b8402213f2265190600090a350610962806100d16000396000f30060806040526004' +
	'361061008d5763ffffffff7c010000000000000000000000000000000000000000000000' +
	'0000000000600035041663372c12b181146100925780633af32abf146100d65780636c65' +
	'99ac1461010b5780638f82b8c414610152578063a2064f4514610179578063b588846c14' +
	'61019a578063d14abf18146101b3578063eab10dd0146101e7575b600080fd5b34801561' +
	'009e57600080fd5b506100b3600160a060020a03600435166101fe565b60408051600160' +
	'a060020a03909316835260208301919091528051918290030190f35b3480156100e25760' +
	'0080fd5b506100f7600160a060020a0360043516610223565b6040805191151582525190' +
	'81900360200190f35b34801561011757600080fd5b5061012c600160a060020a03600435' +
	'16610243565b604080519485526020850193909352838301919091526060830152519081' +
	'900360800190f35b34801561015e57600080fd5b506101676102a4565b60408051918252' +
	'519081900360200190f35b34801561018557600080fd5b506100f7600160a060020a0360' +
	'0435166102aa565b6101b1600160a060020a03600435166024356102ca565b005b6101cc' +
	'600160a060020a03600435166024351515610388565b6040805192151583529015156020' +
	'8301528051918290030190f35b6101b1600160a060020a03600435166024356105e5565b' +
	'60006020819052908152604090208054600190910154600160a060020a03909116908256' +
	'5b600160a060020a0390811660009081526020819052604090205416151590565b600080' +
	'600080610252856102aa565b151561026a575050600154600092509050818061029d565b' +
	'505060018054600160a060020a0385166000908152600260208190526040909120908101' +
	'54600390910154929450909250905b9193509193565b60015490565b600160a060020a03' +
	'90811660009081526002602052604090205416151590565b604080518082018252600160' +
	'a060020a0384811680835260006020808501828152838352908290528582209451855473' +
	'ffffffffffffffffffffffffffffffffffffffff19169416939093178455915160019384' +
	'015582548301909255915183927f1d48c1c80f973622ea182e7afdb4c88d758cb0ee74df' +
	'1bf4dcba402816a624f091a36040513390600160a060020a038416907f1d59e2e6c4b37f' +
	'9c668f9d870ba0a5a6a053cb1b6b83a7cdf7b8402213f2265190600090a35050565b6000' +
	'806000803361039881610223565b15156103a357600080fd5b60009250600091506103b4' +
	'876102aa565b1561058057600160a060020a038781166000908152600260209081526040' +
	'808320338452600401909152902054161515610517576040805180820182523380825288' +
	'1580156020808501918252600160a060020a038d81166000908152600283528781209581' +
	'5260049095019091529490922092518354925173ffffffffffffffffffffffffffffffff' +
	'ffffffff1990931694169390931774ff0000000000000000000000000000000000000000' +
	'191674010000000000000000000000000000000000000000911515919091021790556104' +
	'b057600160a060020a038716600090815260026020819052604090912001805460010190' +
	'556104d3565b600160a060020a0387166000908152600260205260409020600301805460' +
	'010190555b600160a060020a038716600090815260026020819052604090912090810154' +
	'600390910154610504918991896106e5565b61050d87610758565b909350915061057b56' +
	'5b600160a060020a03808816600081815260026020908152604080832033845260040182' +
	'529182902054825160018152941690840152805191927e27ecf491bd1c0c3c7f3b79b26b' +
	'50b0b439cc30fc2dedf7b5c3a448e768a779929081900390910190a25b6105c7565b6040' +
	'805160028152600160a060020a0389166020820152815133927e27ecf491bd1c0c3c7f3b' +
	'79b26b50b0b439cc30fc2dedf7b5c3a448e768a779928290030190a2600192505b821561' +
	'05d9576105d687610223565b91505b50909590945092505050565b336105ef8161022356' +
	'5b15156105fa57600080fd5b60408051608081018252600160a060020a03808616808352' +
	'336020808501828152600086880181815260608801828152868352600294859052898320' +
	'9851895490891673ffffffffffffffffffffffffffffffffffffffff19918216178a5593' +
	'5160018a0180549190991694169390931790965594519186019190915551600390940193' +
	'90935592519192917f9c34c3e7380ed59c1755aadf34cc377bf803ef282f0dfcb52db0f2' +
	'818f56f3709190a36040518290600160a060020a038516907f1d48c1c80f973622ea182e' +
	'7afdb4c88d758cb0ee74df1bf4dcba402816a624f090600090a3505050565b6000600154' +
	'846064028115156106f757fe5b604080518781526020810187905260ff93909204928316' +
	'8282015251919250831515913391600160a060020a038916917f79b0fb854c461d6b2af0' +
	'd05ef58edb796dac052bc94efd813784bdac5447ad5a9181900360600190a45050505050' +
	'565b60008061076361090f565b50600160a060020a038084166000908152600260208181' +
	'526040808420815160808101835281548716815260018201549096169286019290925291' +
	'81015491840191909152600301546060830181905281908110156107d35782516107c790' +
	'610858565b506001905060006107f2565b6001546040840151106107f25782516107eb90' +
	'610864565b5060019050805b811561084d5780151586600160a060020a03167fa23f78a0' +
	'7caf905f2fb70e67d2bf2c43d02fe4ab47489fbeefdfb7af008fe4278560400151866060' +
	'0151604051808381526020018281526020019250505060405180910390a35b9095909450' +
	'92505050565b610861816108c2565b50565b604080518082018252600160a060020a0383' +
	'811680835260006020808501828152928252819052939093209151825473ffffffffffff' +
	'ffffffffffffffffffffffffffff19169116178155905160019182015580548101905561' +
	'0861815b600160a060020a031660009081526002602081905260408220805473ffffffff' +
	'ffffffffffffffffffffffffffffffff1990811682556001820180549091169055908101' +
	'82905560030155565b604080516080810182526000808252602082018190529181018290' +
	'526060810191909152905600a165627a7a72305820521178fa8798b07d82f21e48585ae5' +
	'ade152cf0a21b45b3780763e00569e40a10029';

export const POA_ABI =
	'[{"constant":true,"inputs":[{"name":"","type":"address"}], "name":"whiteList","outputs":[{"name":"person","type":"address"},{"name":"flags","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"isWhitelisted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_nomineeAddress","type":"address"}],"name":"getVoteCounts","outputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getWhiteListCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"isNominee","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"},{"name":"_moniker","type":"bytes32"}],"name":"authoriseNodeWithoutVote","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_nomineeAddress","type":"address"},{"name":"_accepted","type":"bool"}],"name":"castNomineeVote","outputs":[{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_nomineeAddress","type":"address"},{"name":"_moniker","type":"bytes32"}],"name":"submitNominee","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"inputs":[{"name":"_moniker","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_authorisee","type":"address"},{"indexed":true,"name":"_authorisor","type":"address"}],"name":"NodeAuthorised","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_nominee","type":"address"},{"indexed":false,"name":"_yesVotes","type":"uint256"},{"indexed":false,"name":"_noVotes","type":"uint256"},{"indexed":true,"name":"_accepted","type":"bool"}],"name":"NomineeDecision","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_nominee","type":"address"},{"indexed":true,"name":"_voter","type":"address"},{"indexed":false,"name":"_yesVotes","type":"uint256"},{"indexed":false,"name":"_noVotes","type":"uint256"},{"indexed":false,"name":"_progress","type":"uint8"},{"indexed":true,"name":"_accepted","type":"bool"}],"name":"NomineeVoteCast","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_address","type":"address"},{"indexed":false,"name":"errcode1","type":"uint256"},{"indexed":false,"name":"erraddress","type":"address"}],"name":"DebugMessageEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_nominee","type":"address"},{"indexed":true,"name":"_proposer","type":"address"}],"name":"NomineeProposed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_address","type":"address"},{"indexed":true,"name":"_moniker","type":"bytes32"}],"name":"MonikerAnnounce","type":"event"}]';
const keystore = '{"address":"c7532cb0698d68df214f5b7425672b215fe60bb7","crypto":{"cipher":"aes-128-ctr","ciphertext":"5bfd72a142decd988751c95c71fc89a919f24b6f2688732b60db0b37f35488a4","cipherparams":{"iv":"d174bbdcd033bd98645789af3e9816a9"},"kdf":"scrypt","kdfparams":{"dklen":32,"n":262144,"p":1,"r":8,"salt":"c2e82647c9c27f78707c205cb6eaa53e5f92ecea5a1455d783da3f8a1a0e0c47"},"mac":"ed632a77079ca4629e0719ce65b155fe226c06dd8df5cfb1320d81ab525f94b9"},"id":"b6a1243b-58a7-4422-8fb9-105e546618b2","version":3}'


const run = async () => {
    const account = await evmlc.accounts.decrypt(JSON.parse(keystore), 'supersecurepassword');
    const contract = evmlc.contracts.load(JSON.parse(POA_ABI), {
        data: POA_BYTECODE,
    })

    const transaction = await contract.methods.isValidator('address')
        .value(200)
        .gas(1000000)
        .gasPrice(0)
        .submit(account)

    return transaction
}

run().then(console.log).catch(console.log)
